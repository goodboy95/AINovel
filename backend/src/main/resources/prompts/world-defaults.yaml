draftTemplates:
  cosmos: |-
    你是一名资深世界观设定顾问，请围绕「${world.name}」的“${module.label}”模块补全全部字段。

    【已知基础信息】
    - 世界概述：${world.tagline}
    - 主题标签：${world.themes[*]|join(" / ")}
    - 创作意图：${world.creativeIntent}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【当前字段草稿】
    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    【写作要求】
    1. 输出必须是合法 JSON，对象键分别为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 若字段已有内容，请基于原值润色和扩充，保持既有设定。
    3. 强调结构清晰、画面感与规则一致性。
    4. 每个字段 180-400 字，可使用有序列表表达规则。

    请只返回 JSON 对象，无需额外解释。
  geography: |-
    你是一名世界地理设定专家，请为「${world.name}」的“${module.label}”模块生成详细内容。

    【基础背景】
    - 世界概述：${world.tagline}
    - 主题标签：${world.themes[*]|join(" / ")}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【写作要求】
    1. 输出 JSON，对象键为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 若已有字段值，请基于原内容润色扩展，保持既有设定。
    3. 每个字段需包含明确地名、生物或资源描述，避免泛泛之词。
    4. “代表性区域与地标”字段建议输出有序列表，其余字段使用段落文本。

    请直接返回 JSON。
  society: |-
    你是一名社会结构分析师，请补全「${world.name}」的“${module.label}”模块。

    【基础背景】
    - 世界概述：${world.tagline}
    - 主题标签：${world.themes[*]|join(" / ")}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【要求】
    1. 输出 JSON，键为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 保持与既有设定一致，必要时对原值进行润色与细化。
    3. 每个字段需包含可用于剧情的矛盾点或势力互动细节。
    4. 建议使用段落或有序列表提高可读性。

    只返回 JSON。
  history: |-
    你是一名世界史学家，请完善「${world.name}」的历史与传说设定。

    【背景信息】
    - 世界概述：${world.tagline}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【要求】
    1. 输出 JSON，键为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 对已有内容进行润色扩写，确保事件之间因果清晰。
    3. 强调关键节点、传奇人物与悬念，为剧情埋设伏笔。
    4. “纪元与年代划分”字段可使用时间线或列表。

    请直接返回 JSON。
  culture: |-
    你是文化研究顾问，请扩展「${world.name}」的文化与日常设定。

    【世界背景】
    - 世界概述：${world.tagline}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【写作要求】
    1. 输出 JSON，键为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 结合已有内容润色扩展，突出文化细节与生活体验。
    3. 需包含具体仪式、艺术形式或价值冲突的例子。
    4. 语言富有画面感，便于创作者直接引用。

    只返回 JSON。
  economy: |-
    你是一名经济与科技设定专家，请补齐「${world.name}」的相关模块。

    【背景】
    - 世界概述：${world.tagline}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【要求】
    1. 输出 JSON，键为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 若已有字段值，请在尊重原设定前提下进行润色与延展。
    3. 每个字段需给出具体制度、代表产业或技术应用场景。
    4. 指出资源或技术带来的社会矛盾与机会。

    请只返回 JSON。
  factions: |-
    你是一名剧情钩子设计师，请围绕「${world.name}」的势力与剧情钩子模块生成内容。

    【基础信息】
    - 世界概述：${world.tagline}
    ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

    【要求】
    1. 输出 JSON，键为 ${helper.fieldDefinitions[*].key|join(", ")}。
    2. 保持与既有设定一致，必要时细化关系网与剧情冲突。
    3. 每个字段需提供可直接转化为故事线索的细节。
    4. “故事钩子与潜在剧情线”字段至少给出 3 条不同方向的创作提示。

    返回 JSON 即可。
finalTemplates:
  cosmos: |-
    你是世界设定档案的撰稿人，请将「${world.name}」的“${module.label}”模块整理为一篇结构化说明，用于向作者与 AI 解释世界的基础法则。

    【输入素材】
    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    【撰写要求】
    1. 以段落形式写作，禁止使用 Markdown 标题符号。
    2. 先用 2-3 句概述世界法则，再按主题拆分段落描述空间结构、时间规则、能量体系、科技关系与法则限制。
    3. 每段需包含明确示例或规则，突出本世界独特性。
    4. 结尾增加“创作提示”段落，提醒创作时需遵守的边界。
    5. 总字数约 500-700 字。
  geography: |-
    请基于以下素材撰写「${world.name}」的《${module.label}》文档，长度约 500-700 字。

    素材：
    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    写作要求：
    1. 首段总结世界整体格局与生态主题。
    2. 依次描述总体格局、区域亮点、气候循环、智慧种族分布、生态与关键资源。
    3. 在资源段落指出潜在冲突或剧情线索。
    4. 结尾提供 2-3 条创作建议，例如旅行描写或环境冲突。
    5. 禁止使用 Markdown 标题符号。
  society: |-
    将下列素材整理为「${world.name}」的社会与政治说明，面向创作者引用。

    素材：
    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    要求：
    1. 先总述整体社会格局，再拆分政体与势力、法律与秩序、阶层与民生、军事冲突、治理模式。
    2. 每段需指出潜在冲突或故事线索。
    3. 结尾补充创作建议，提示人物冲突或社会矛盾的使用方式。
    4. 全文 500-700 字，保持条理清晰。
  history: |-
    汇总以下素材，为「${world.name}」撰写历史与传说档案（500-700 字）。

    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    结构：
    1. 开篇简述世界历史主旋律。
    2. 分段描述创世起源、纪元划分、关键事件、传奇人物及未解之谜。
    3. 在关键事件段落中说明影响与后续影响。
    4. 收尾给出创作提示，说明哪些历史伏笔可被后续剧情利用。
  culture: |-
    将下列素材整合为「${world.name}」的文化与日常说明文，约 500-700 字。

    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    写作提示：
    1. 先概述整体文化气质，再按宗教、语言、艺术、习俗、价值观分段描述。
    2. 每段需穿插生活化场景或象征物。
    3. 结尾提供创作建议，提醒在角色互动或场景描写时应注意的文化禁忌。
  economy: |-
    根据素材撰写「${world.name}」的《经济与科技概览》，约 500-700 字。

    素材：
    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    要求：
    1. 先概括经济结构，再分别说明经济体系、产业贸易、科技水平、基础设施、民生技术。
    2. 在描述时突出资源流向、技术差距与冲突点。
    3. 结尾给出创作提示，例如如何利用经济矛盾推动剧情。
  factions: |-
    整理以下素材，为「${world.name}」撰写势力与剧情钩子说明文，约 500-700 字。

    ${helper.fieldDefinitions[*]|map(m -> "- " + m.label + "：" + m.value)|join("\n")}

    结构建议：
    1. 概述主要势力格局。
    2. 分段描述主导势力、种族关系、当前冲突、关键地点。
    3. 最后集中列出剧情钩子，说明触发条件与可能走向。
    4. 语气专业但鼓励创作。
fieldRefineTemplate: |-
  你是一名严谨的世界构建编辑，负责完善「${world.name}」世界中“${module.label}”模块的【${helper.field.label}】字段。

  【当前世界背景】
  - 核心概述：${world.tagline}
  - 主题标签：${world.themes[*]|join(" / ")}
  ${relatedModules[*]|map(m -> "- " + m.label + "摘要：" + m.summary)|join("\n")}

  【优化目标】
  ${helper.field.focusNote}
  - 保持条理清晰，可使用短句或项目符号。
  - 尊重已知规则，避免自相矛盾。
  ${helper.instruction|default("")}

  请在 180-400 字内重写下方内容，只返回优化后的正文，无需任何解释或 Markdown 标题。

  原始文本：
  """
  ${helper.field.originalText}
  """
focusNotes:
  cosmos:
    cosmos_structure: "突出层级结构、空间形态与视觉符号。"
    space_time: "说明时间流速、空间边界与穿越代价。"
    energy_system: "明确力量来源、使用者与施展代价。"
    technology_magic_balance: "比较科技与超自然的共存或冲突。"
    constraints: "列出不可违背的规则，并说明违反后果。"
  geography:
    world_map_overview: "交代整体地图层次与方位感。"
    signature_regions: "为每个地点提供特色、势力与剧情钩子。"
    climate_cycles: "说明气候规律与异常天气的成因。"
    sapient_species: "突出种族分布、习俗与摩擦点。"
    ecosystems_resources: "强调生态链、稀缺资源与争夺。"
  society:
    political_landscape: "描绘势力版图与统治结构。"
    law_order: "说明法律体系、治安与惩罚机制。"
    social_structure: "体现阶层划分、民生差异与流动性。"
    military_conflict: "突出军事力量部署与冲突热点。"
    governance_dynamics: "解释权力运作、决策流程与隐性规则。"
  history:
    creation_myth: "强调世界起源的象征与影响。"
    timeline_epochs: "梳理纪元划分与关键节点。"
    turning_points: "描述事件经过、结果与后续影响。"
    legendary_figures: "突出人物事迹、遗产与现今影响。"
    prophecies: "列出预言或悬念，并提示创作用途。"
  culture:
    religion_faith: "呈现主要信仰体系与仪式体验。"
    language_communication: "说明语言、文字与独特沟通方式。"
    arts_entertainment: "描绘代表性的艺术或娱乐形式。"
    customs_rituals: "给出日常习俗或仪式流程细节。"
    values_morality: "强调价值观冲突与伦理争议。"
  economy:
    economic_system: "阐明经济制度、货币与运转方式。"
    industry_trade: "描述主导产业、贸易路线与关键伙伴。"
    technology_level: "展示科技/魔法的实际应用层级。"
    infrastructure: "说明交通、通讯等基础设施的运作。"
    daily_life_tech: "突出改善民生的技术与应用场景。"
  factions:
    faction_overview: "总结主要势力的目标与资源。"
    species_relations: "说明种族之间的联盟与矛盾。"
    current_conflicts: "突出正在进行的冲突及导火索。"
    key_locations: "描述关键据点与剧情作用。"
    story_hooks: "给出多条可直接开篇的剧情钩子。"
